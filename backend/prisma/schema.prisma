// Prisma Schema generated by PRD-to-Tasks
// https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Warehouse {
  id String @id @default(uuid())
  nodeId String @unique @map("node_id")
  name String @unique
  parentId String? @map("parent_id")
  nodeType String @map("node_type")
  method String @default("FIFO")
  address String
  description String?
  status String @default("Active")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")

  @@map("warehouses")
}

model Supplier {
  id String? @id @default(uuid())
  suppId String @unique @map("supp_id")
  name String
  picName String @map("pic_name")
  address String
  phone String
  status String? @default("Active")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")

  @@map("suppliers")
}

model Item {
  id String? @id @default(uuid())
  sku String @unique
  brand String?
  name String
  uomId String @map("uom_id")
  status String? @default("Active")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")

  @@map("items")
}

model Uom {
  id String? @id @default(uuid())
  uomId String @unique @map("uom_id")
  code String @unique
  name String
  status String? @default("Active")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")

  @@map("uoms")
}

model Inventory {
  id String? @id @default(uuid())
  itemId String @map("item_id")
  warehouseId String @map("warehouse_id")
  binId String? @map("bin_id")
  qtyOnHand Decimal @map("qty_on_hand")
  lastReceivedAt DateTime? @map("last_received_at")
  lastPoId String? @map("last_po_id")

  @@map("inventories")
}

model PurchaseOrder {
  id String? @id @default(uuid())
  poId String @unique @map("po_id")
  poDate DateTime @map("po_date")
  supplierId String @map("supplier_id")
  distributionMethod String @map("distribution_method")
  warehouseId String @map("warehouse_id")
  grandTotal Decimal @map("grand_total")
  paymentMethod String @map("payment_method")
  status String? @default("submitted")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")
  deletedAt DateTime? @map("deleted_at")
  deletedBy String? @map("deleted_by")

  @@map("purchase_orders")
}

model PurchaseOrderLineItem {
  id String? @id @default(uuid())
  poId String @map("po_id")
  itemId String @map("item_id")
  quantity Decimal
  unitPrice Decimal @map("unit_price")
  totalAmount Decimal @map("total_amount")

  @@map("purchase_order_line_items")
}

model PoAttachment {
  id String? @id @default(uuid())
  poId String @unique @map("po_id")
  filePath String @map("file_path")
  fileType String? @map("file_type")
  createdAt DateTime @map("created_at")
  createdBy String? @map("created_by")
  updatedAt DateTime @map("updated_at")
  updatedBy String? @map("updated_by")

  @@map("po_attachments")
}

