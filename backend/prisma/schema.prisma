// Add this to the existing schema.prisma file

model Inventory {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  itemId          String    @map("item_id") @db.Uuid
  warehouseId     String    @map("warehouse_id") @db.Uuid
  binId           String?   @map("bin_id") @db.Uuid
  qtyOnHand       Decimal   @map("qty_on_hand") @db.Decimal(18, 2)
  lastReceivedAt  DateTime? @map("last_received_at") @db.Timestamptz
  lastPoId        String?   @map("last_po_id") @db.Uuid

  // Relations
  item      Item      @relation(fields: [itemId], references: [id], onDelete: Restrict, onUpdate: Cascade)
  warehouse Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Restrict, onUpdate: Cascade)

  @@index([itemId], name: "idx_inventories_item_id")
  @@index([warehouseId], name: "idx_inventories_warehouse_id")
  @@index([binId], name: "idx_inventories_bin_id")
  @@map("inventories")
}

// Ensure Item and Warehouse models have the relation fields
model Item {
  id          String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  // ... other fields
  inventories Inventory[]
  @@map("items")
}

model Warehouse {
  id          String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  // ... other fields
  inventories Inventory[]
  @@map("warehouses")
}